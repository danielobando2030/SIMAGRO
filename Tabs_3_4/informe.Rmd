---
title: ' '
params:
  producto: NA
  anio: NA
  datos: NA
  grafico_png: NA
  resumen: NA
  mensaje1: NA

output:
  pdf_document:
    latex_engine: xelatex

header-includes:
  - \usepackage{float}
  - \usepackage{arydshln}
  - \usepackage{graphicx}
  - \usepackage{xcolor}
  - \usepackage{fontspec}
  - \usepackage{booktabs}
  - \usepackage{fancyhdr}
  - \usepackage{eso-pic}
  - \usepackage{colortbl}
  - \usepackage{adjustbox}
  - \setmainfont{Prompt-Regular.ttf}
  - \definecolor{mygreen}{RGB}{78,77,77}
  - \definecolor{MYGREEN}{RGB}{78,77,77}
  - \definecolor{grayA}{RGB}{78,77,77}
  - \definecolor{green2}{RGB}{78,77,77}
  - \pagestyle{fancy}
  - \fancyfoot{}
  - \fancyhead[C]{\includegraphics[width=\textwidth]{www/logo_3.png}}
  - \renewcommand{\headrule}{\color{mygreen}\hrule width\headwidth height\headrulewidth}
  - \setlength{\headheight}{2cm}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(dplyr)
library(knitr)
library(kableExtra)
```

\begin{flushright}
\textcolor{mygreen}{Informe en línea generado el: `r format(Sys.Date(), "%d %B, %Y")`}
\end{flushright}

\section*{\textcolor{mygreen}{Parámetros con los cuales se generó el informe:}}

```{r, results='asis'}
# -----------------------------
# Tabla de Parámetros - Informe 3_4
# -----------------------------

df_params <- data.frame(
  Parámetro = c("Año", "Alimento"),
  Valor = c(
    ifelse(is.na(params$anio), "Todos los años", params$anio),
    params$producto
  )
)

cat("\\small\n")
cat("\\begin{adjustbox}{width=1\\textwidth}\n")
cat("\\begin{tabular}{p{4cm} @{\\hspace{5cm}} p{6cm}}\n")
cat("\\toprule\n")

for (i in 1:nrow(df_params)) {
  cat(df_params$Parámetro[i], " & ", df_params$Valor[i], " \\\\\n", sep = "")
}

cat("\\bottomrule\n")
cat("\\end{tabular}\n")
cat("\\end{adjustbox}\n")
cat("\\normalsize\n")
```

\begingroup
\fontsize{14}{14}\selectfont
\textcolor{mygreen}{Comparativo de Precios entre Ciudades}
\par
\fontsize{12}{12}\selectfont
\textcolor{mygreen}{Descubre la diferencia de precios entre ciudades así como sus variaciones}
\par
\endgroup

```{r grafico_principal, echo=FALSE, out.width="100%", fig.align='center'}
knitr::include_graphics(params$grafico_png)
```

\vspace{0.2cm}
\begingroup
\fontsize{8}{8}\selectfont
\textcolor{mygreen}{\textbf{Fuente:} Cálculos propios a partir de datos del Sistema de Información de Precios y Abastecimiento del Sector Agropecuario (SIPSA).}
\endgroup

\vspace{0.2cm}

\begingroup
\fontsize{10}{11}\selectfont
\textcolor{grayA}{`r enc2utf8(params$resumen)`}
\endgroup

\vspace{0.2cm}

\begingroup
\fontsize{10}{10}\selectfont
\textcolor{grayA}{`r enc2utf8(params$mensaje1)`}
\endgroup

\vspace{0.25cm}
\begingroup
\fontsize{8}{8}\selectfont
\textcolor{grayA}{Este gráfico muestra la diferencia promedio de precios entre ciudades comparadas con Bogotá. El tamaño del círculo representa la variabilidad interna del precio (desviación estándar). Valores positivos indican precios mayores que Bogotá; valores negativos, menores.}
\endgroup

\AddToShipoutPictureBG*{
  \includegraphics[width=\paperwidth,height=3cm,keepaspectratio]{www/logo_4.png}
}


